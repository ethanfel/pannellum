<body style="background-image: url(../../selected/crop/crop_0001.jpg); background-size: 2048px 2048px;">
  <style>
    .container {
      display: flex;
      width: 100%;
      height: 52vh;
      justify-content: center;
      align-items: center;
    }

    iframe {
      width: 512px;
      height: 512px;
      border: 2px solid red;
    }

    button {
      width: 40px;
      height: 516px;
      background-color: red;
    }
  </style>

  <script>
    // create a loop for each page
    for (let page = 1; page <= 4; page++) {
      let start = (page - 1) * 50 + 1;
      let end = start + 49;
      
      // create a container for each page
      let pageContainer = document.createElement('div');
      pageContainer.id = 'page_' + page;
      document.body.appendChild(pageContainer);
      
      // create iframes for each image in the page
      for (let i = start; i <= end; i++) {
        let panoramaImage = '../../selected/' + ('0000' + i).slice(-4) + '.jpg';
        let previewImage = '../../selected/crop/' + 'crop_' + ('0000' + i).slice(-4) + '.jpg';
        let id = 'preview_' + i;

        let container = document.createElement('div');
        container.classList.add('container');
        pageContainer.appendChild(container);
        
        let iframe = document.createElement('iframe');
        iframe.id = id;
        iframe.src = `../src/standalone/pannellum.htm?panorama=${panoramaImage}&preview=${previewImage}`;
        iframe.allowFullscreen = true;
        container.appendChild(iframe);
        
        let button = document.createElement('button');
        button.id = id + '_button';
        button.innerHTML = 'Image ' + (i + 1);
        container.appendChild(button);
        
        let isRed = (localStorage.getItem(id + '_state') !== 'green');
        if (!isRed) {
          iframe.style.border = '2px solid green';
          button.style.backgroundColor = 'green';
        }
        
        button.addEventListener('click', function() {
          if (isRed) {
            iframe.style.border = '2px solid green';
            button.style.backgroundColor = 'green';
            localStorage.setItem(id + '_state', 'green');
          } else {
            iframe.style.border = '2px solid red';
            button.style.backgroundColor = 'red';
            localStorage.setItem(id + '_state', 'red');
          }
          isRed = !isRed;
        });
      }
    }
  </script>
</body>
