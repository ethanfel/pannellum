<body>
  <div>
    <label for="start">Starting Image Number:</label>
    <input type="number" id="start" name="start" min="1">
    <button id="submit">Submit</button>
  </div>
  
  <script>
    let startInput = document.getElementById("start");
    let submitButton = document.getElementById("submit");

    submitButton.addEventListener("click", function() {
      let start = parseInt(startInput.value);
      
      for (let i = start; i < start + 50; i++) {
        let panoramaImage = `../../selected/${('0000' + i).slice(-4)}.jpg`;
        let previewImage = `../../selected/crop/crop_${('0000' + i).slice(-4)}.jpg`;
        let id = `preview_${i}`;

        let container = document.createElement('div');
        container.classList.add('container');
        document.body.appendChild(container);
        
        let iframe = document.createElement('iframe');
        iframe.id = id;
        iframe.src = `../src/standalone/pannellum.htm?panorama=${panoramaImage}&preview=${previewImage}`;
        iframe.allowFullscreen = true;
        container.appendChild(iframe);
        
        let button = document.createElement('button');
        button.id = id + '_button';
        button.innerHTML = `Image ${i+1}`;
        container.appendChild(button);
        
        let isRed = (localStorage.getItem(id + '_state') !== 'green');
        if (!isRed) {
          iframe.style.border = '2px solid green';
          button.style.backgroundColor = 'green';
        }
        
        button.addEventListener('click', function() {
          if (isRed) {
            iframe.style.border = '2px solid green';
            button.style.backgroundColor = 'green';
            localStorage.setItem(id + '_state', 'green');
          } else {
            iframe.style.border = '2px solid red';
            button.style.backgroundColor = 'red';
            localStorage.setItem(id + '_state', 'red');
          }
          isRed = !isRed;
        });
      }
    });
  </script>
</body>
