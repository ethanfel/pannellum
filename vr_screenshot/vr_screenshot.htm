<!DOCTYPE HTML>
<html>
<head>
    <title>pannellum embed example</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body style="background-image: url(../../selected/crop/crop_0001.jpg); background-size: 2048px 2048px;">

 <body>
  <script>
    // Prompt the user for the value of i
    let i = prompt("Enter a value for i:");

    // Convert i to a number
    i = parseInt(i);

    // Create a loop to display i+50 images
    for (let j = i; j < i+50; j++) {
      let panoramaImage = `../../selected/${('0000' + j).slice(-4)}.jpg`;
      let previewImage = `../../selected/crop/crop_${('0000' + j).slice(-4)}.jpg`;
      let id = `preview_${j}`;

      let container = document.createElement('div');
      container.classList.add('container');
      document.body.appendChild(container);
      
      let iframe = document.createElement('iframe');
      iframe.id = id;
      iframe.src = `../src/standalone/pannellum.htm?panorama=${panoramaImage}&preview=${previewImage}`;
      iframe.allowFullscreen = true;
      container.appendChild(iframe);
      
      let button = document.createElement('button');
      button.id = id + '_button';
      button.innerHTML = `Image ${j+1}`;
      container.appendChild(button);
      
      let isRed = (localStorage.getItem(id + '_state') !== 'green');
      if (!isRed) {
        iframe.style.border = '2px solid green';
        button.style.backgroundColor = 'green';
      }
      
      button.addEventListener('click', function() {
        if (isRed) {
          iframe.style.border = '2px solid green';
          button.style.backgroundColor = 'green';
          localStorage.setItem(id + '_state', 'green');
        } else {
          iframe.style.border = '2px solid red';
          button.style.backgroundColor = 'red';
          localStorage.setItem(id + '_state', 'red');
        }
        isRed = !isRed;
      });
    }
  </script>
</body>

</html>
